/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/. */

function helloWorld(){}for(var loginBtns=document.querySelectorAll(".login"),i=0;i<loginBtns.length;i++)loginBtns[i].addEventListener("click",function(a){a.preventDefault(),navigator.id.request()},!1);document.querySelector(".logout").addEventListener("click",function(a){a.preventDefault(),navigator.id.logout()},!1),navigator.id.watch({onlogin:function(a){$(".persona").hide();var b=document.querySelector("#csrf_token").getAttribute("value"),c=new XMLHttpRequest;c.open("POST","/persona/verify",!0),c.setRequestHeader("Content-Type","application/json"),c.addEventListener("loadend",function(){var a=JSON.parse(this.responseText);a&&"okay"===a.status&&(console.log("You have been logged in as: "+a.email),$(".logout,.greeting").show(),$(".greeting span").text(a.email))},!1),c.send(JSON.stringify({assertion:a,_csrf:b}))},onlogout:function(){$(".persona").hide(),$(".login").show();var a=document.querySelector("#csrf_token").getAttribute("value"),b=new XMLHttpRequest;b.open("POST","/persona/logout",!0),b.addEventListener("loadend",function(){console.log("You have been logged out")}),b.send(JSON.stringify({_csrf:a}))}});